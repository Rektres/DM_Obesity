<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Minería de Datos - Obesidad</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-matrix@1.2.0/dist/chartjs-chart-matrix.min.js"></script>
    <style>
        body {
            background-color: #121212;
            font-family: 'Segoe UI', sans-serif;
            color: #f5f5f5;
            margin: 0;
            padding: 0;
        }

        header {
            background-color: #1e1e1e;
            padding: 20px;
            text-align: center;
            border-bottom: 2px solid #333;
        }

        h1, h2 {
            color: #e0e0e0;
        }

        .container {
            padding: 30px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background-color: #1c1c1c;
            margin-bottom: 40px;
        }

        th, td {
            padding: 12px;
            text-align: center;
            border: 1px solid #333;
        }

        th {
            background-color: #333;
            color: #ffffff;
        }

        canvas {
            background-color: #1c1c1c;
            margin-top: 30px;
            border-radius: 10px;
            box-shadow: 0 0 10px #00000099;
        }

        .chart-container {
            margin-bottom: 60px;
        }
    </style>
</head>
<body>
    <header>
        <h1>Minería de Datos - Obesidad</h1>
        <p>Visualización de Modelos de Machine Learning</p>
    </header>

    <div class="container">

        <h2>Reglas Apriori Detectadas</h2>
        <table>
            <thead>
                <tr>
                    <th>Antecedente</th>
                    <th>Consecuente</th>
                    <th>Soporte</th>
                    <th>Confianza</th>
                    <th>Lift</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>{Calorías Altas}</td><td>{Obesidad}</td><td>0.32</td><td>0.75</td><td>1.24</td></tr>
                <tr><td>{Sedentarismo}</td><td>{Obesidad}</td><td>0.29</td><td>0.70</td><td>1.15</td></tr>
                <tr><td>{Edad > 40}</td><td>{Obesidad}</td><td>0.25</td><td>0.68</td><td>1.12</td></tr>
                <tr><td>{IMC > 30}</td><td>{Obesidad}</td><td>0.35</td><td>0.88</td><td>1.31</td></tr>
                <tr><td>{Genética}</td><td>{Obesidad}</td><td>0.20</td><td>0.65</td><td>1.10</td></tr>
                <tr><td>{Azúcar Alta}</td><td>{Obesidad}</td><td>0.27</td><td>0.72</td><td>1.18</td></tr>
                <tr><td>{Comida Chatarra}</td><td>{Obesidad}</td><td>0.30</td><td>0.76</td><td>1.22</td></tr>
                <tr><td>{No actividad física}</td><td>{Obesidad}</td><td>0.31</td><td>0.80</td><td>1.25</td></tr>
                <tr><td>{Sueño < 6 hrs}</td><td>{Obesidad}</td><td>0.23</td><td>0.66</td><td>1.09</td></tr>
                <tr><td>{Estrés Crónico}</td><td>{Obesidad}</td><td>0.28</td><td>0.70</td><td>1.16</td></tr>
            </tbody>
        </table>

        <div class="chart-container">
            <h2>Regresión Lineal: IMC vs Edad</h2>
            <canvas id="regresionLineal" width="600" height="300"></canvas>
        </div>

        <div class="chart-container">
            <h2>Naive Bayes: Matriz de Confusión</h2>
            <canvas id="matrizConfusion" width="300" height="300"></canvas>
        </div>

        <div class="chart-container">
            <h2>Árbol de Decisión</h2>
            <canvas id="arbolDecision" width="600" height="300"></canvas>
        </div>

        <div class="chart-container">
            <h2>Clustering K=3: Distribución</h2>
            <canvas id="clustering" width="600" height="300"></canvas>
        </div>

    </div>

    <script>
        // Gráfico de Regresión Lineal
        const ctxLineal = document.getElementById('regresionLineal').getContext('2d');
        new Chart(ctxLineal, {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'Datos IMC vs Edad',
                    data: [
                        {x: 18, y: 22}, {x: 25, y: 24}, {x: 30, y: 26}, {x: 40, y: 29}, {x: 50, y: 32}, {x: 60, y: 35}
                    ],
                    backgroundColor: '#00BCD4',
                },
                {
                    label: 'Línea de Regresión',
                    type: 'line',
                    data: [
                        {x: 18, y: 21},
                        {x: 60, y: 35}
                    ],
                    borderColor: '#FF5722',
                    borderWidth: 2,
                    fill: false
                }]
            },
            options: {
                scales: {
                    x: { title: { display: true, text: 'Edad' } },
                    y: { title: { display: true, text: 'IMC' } }
                }
            }
        });

        // Matriz de Confusión (Naive Bayes)
        const ctxMatrix = document.getElementById('matrizConfusion').getContext('2d');
        new Chart(ctxMatrix, {
            type: 'matrix',
            data: {
                datasets: [{
                    label: 'Matriz de Confusión',
                    data: [
                        {x: 0, y: 0, v: 45}, {x: 1, y: 0, v: 5},
                        {x: 0, y: 1, v: 8}, {x: 1, y: 1, v: 42}
                    ],
                    backgroundColor: ctx => {
                        const value = ctx.dataset.data[ctx.dataIndex].v;
                        return value > 40 ? '#66bb6a' : '#ef5350';
                    },
                    width: 80,
                    height: 80
                }]
            },
            options: {
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            title: () => '',
                            label: ctx => `Valor: ${ctx.raw.v}`
                        }
                    }
                },
                scales: {
                    x: {
                        labels: ['No Obeso', 'Obeso'],
                        ticks: { stepSize: 1 },
                        title: { display: true, text: 'Predicción' }
                    },
                    y: {
                        labels: ['No Obeso', 'Obeso'],
                        ticks: { stepSize: 1 },
                        title: { display: true, text: 'Real' }
                    }
                }
            }
        });

        // Árbol de decisión (dummy visual como gráfico de barras)
        const ctxTree = document.getElementById('arbolDecision').getContext('2d');
        new Chart(ctxTree, {
            type: 'bar',
            data: {
                labels: ['Edad', 'IMC', 'Actividad', 'Alimentación'],
                datasets: [{
                    label: 'Importancia de Atributos',
                    data: [0.3, 0.4, 0.2, 0.1],
                    backgroundColor: ['#2196f3', '#4caf50', '#ff9800', '#9c27b0']
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'Importancia' }
                    }
                }
            }
        });

        // Gráfico de Clustering
        const ctxCluster = document.getElementById('clustering').getContext('2d');
        new Chart(ctxCluster, {
            type: 'scatter',
            data: {
                datasets: [
                    {
                        label: 'Cluster 1',
                        data: [{x: 2, y: 3}, {x: 2.2, y: 3.5}, {x: 1.8, y: 2.9}],
                        backgroundColor: '#f44336'
                    },
                    {
                        label: 'Cluster 2',
                        data: [{x: 6, y: 7}, {x: 5.8, y: 6.7}, {x: 6.2, y: 7.3}],
                        backgroundColor: '#4caf50'
                    },
                    {
                        label: 'Cluster 3',
                        data: [{x: 9, y: 2}, {x: 8.8, y: 2.2}, {x: 9.2, y: 1.8}],
                        backgroundColor: '#2196f3'
                    },
                    {
                        label: 'Centroides',
                        data: [{x: 2, y: 3}, {x: 6, y: 7}, {x: 9, y: 2}],
                        pointStyle: 'cross',
                        backgroundColor: 'white',
                        borderColor: 'yellow',
                        borderWidth: 2,
                        radius: 10
                    }
                ]
            },
            options: {
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: ctx => `(${ctx.raw.x}, ${ctx.raw.y})`
                        }
                    }
                },
                scales: {
                    x: { title: { display: true, text: 'Componente 1 (PCA)' } },
                    y: { title: { display: true, text: 'Componente 2 (PCA)' } }
                }
            }
        });
    </script>
</body>
</html>
